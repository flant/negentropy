"""
This module contains a vault migration.
Write your migration using hvac python module. See https://hvac.readthedocs.io/en/stable/overview.html for details.
Migration Name: write_trusted_ca
Migration Version: 20210716203319
"""

from apply import *

def upgrade(connection):
    ca = download_blob_as_string(terraform_state_bucket, vault_auth_ca_name)

    connection.write(
        path='auth/cert/certs/auth',
        display_name='auth',
        policies='auth',
        certificate=ca
    )

    pass
