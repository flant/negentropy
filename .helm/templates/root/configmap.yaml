---
apiVersion: v1
kind: ConfigMap
metadata:
  name: vault-root
  labels:
    app: vault-root
data:
  vault.hcl: |-
    storage "file" {
      path = "/tmp/vault/data"
    }

    listener "tcp" {
      address = "0.0.0.0:{{ pluck .Values.werf.env .Values.port | first | default .Values.port._default }}"
      tls_disable = "true"
      max_request_duration = "120s"
    }

    api_addr = "http://vault-root:{{ pluck .Values.werf.env .Values.port | first | default .Values.port._default }}"

    cluster_name = "root-source"

    ui = false

    log_level = "debug"
